/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Component, Input, Output, ElementRef, EventEmitter, Inject, NgZone } from '@angular/core';
import { DOCUMENT } from '@angular/common';
import { Widget } from '../widget.model';
import { Observable } from 'rxjs/Observable';
import 'rxjs/add/observable/fromEvent';
import { BootstrapService } from '../bootstrap.service';
/**
 * @record
 */
function ICoordinates() { }
function ICoordinates_tsickle_Closure_declarations() {
    /** @type {?} */
    ICoordinates.prototype.x;
    /** @type {?} */
    ICoordinates.prototype.y;
}
var WidgetComponent = /** @class */ (function () {
    function WidgetComponent(document, elementRef, zone, bootstrapService) {
        this.document = document;
        this.elementRef = elementRef;
        this.zone = zone;
        this.bootstrapService = bootstrapService;
        this.widgetMoving = new EventEmitter();
        this.widgetDropped = new EventEmitter();
        this.widgetHovered = new EventEmitter();
        this.widgetUnhovered = new EventEmitter();
        this.resizeStarted = new EventEmitter();
        this.close = new EventEmitter();
        this.fullscreen = new EventEmitter();
    }
    /**
     * @return {?}
     */
    WidgetComponent.prototype.ngOnInit = /**
     * @return {?}
     */
    function () { };
    /**
     * @param {?} e
     * @return {?}
     */
    WidgetComponent.prototype.getUserPosition = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        return e.changedTouches ?
            {
                x: e.changedTouches[0].pageX,
                y: e.changedTouches[0].pageY
            } : {
            x: e.pageX,
            y: e.pageY
        };
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.notModifiable = /**
     * @return {?}
     */
    function () {
        if (this.widget.isFullScreen) {
            return true;
        }
    };
    /**
     * @param {?} e
     * @return {?}
     */
    WidgetComponent.prototype.notGrabbable = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        if (this.notModifiable()) {
            return true;
        }
        if (!e) {
            return true;
        }
        var /** @type {?} */ target = e.target || e.srcElement;
        if (!target) {
            return true;
        }
        if (target.classList.contains('not-grabbable')) {
            return true;
        }
        if (target.closest('.not-grabbable')) {
            return true;
        }
        return false;
    };
    /**
     * @param {?} e
     * @return {?}
     */
    WidgetComponent.prototype.startMove = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        this.widgetMoving.emit(this);
        var /** @type {?} */ thisElement = this.elementRef.nativeElement;
        // We'll reset the style when we call endMove.
        this.initialPosition = {
            y: thisElement.style.top,
            x: thisElement.style.left
        };
        // Make the dragging widget follow the user's movement.
        var /** @type {?} */ userPosition = this.getUserPosition(e);
        this.moveStartPosition = {
            x: e.touches ?
                e.touches[0].pageX - thisElement.offsetLeft :
                e.pageX - thisElement.offsetLeft,
            y: e.touches ?
                e.touches[0].pageY - thisElement.offsetTop :
                e.pageY - thisElement.offsetTop
        };
        thisElement.style.left = (userPosition.x - this.moveStartPosition.x) + 'px';
        thisElement.style.top = (userPosition.y - this.moveStartPosition.y) + 'px';
        thisElement.classList.add('moving-widget');
    };
    /**
     * @param {?} e
     * @return {?}
     */
    WidgetComponent.prototype.move = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        // Make the widget follow the user's movement.
        var /** @type {?} */ userPosition = this.getUserPosition(e);
        this.elementRef.nativeElement.style.left = (userPosition.x - this.moveStartPosition.x) + 'px';
        this.elementRef.nativeElement.style.top = (userPosition.y - this.moveStartPosition.y) + 'px';
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.endMove = /**
     * @return {?}
     */
    function () {
        this.widgetDropped.emit();
        this.elementRef.nativeElement.classList.remove('moving-widget');
        this.elementRef.nativeElement.style.top = this.initialPosition.y;
        this.elementRef.nativeElement.style.left = this.initialPosition.x;
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.getHeightInformation = /**
     * @return {?}
     */
    function () {
        var /** @type {?} */ rect = this.elementRef.nativeElement
            .getBoundingClientRect();
        return {
            height: rect.height,
            top: rect.top
        };
    };
    /**
     * @param {?} e
     * @return {?}
     */
    WidgetComponent.prototype.onWidgetMouseDown = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        if (this.notGrabbable(e)) {
            return;
        }
        this.startMove(e);
        // Make sure these observers are removed in endMove.
        this.mouseMoveSubscription =
            Observable.fromEvent(this.document, 'mousemove')
                .subscribe(function (event) {
                _this.zone.runOutsideAngular(function () {
                    _this.move(event);
                });
            });
        this.mouseUpSubscription =
            Observable.fromEvent(this.document, 'mouseup')
                .subscribe(function () {
                _this.endMove();
                if (_this.mouseMoveSubscription) {
                    _this.mouseMoveSubscription.unsubscribe();
                }
                if (_this.mouseUpSubscription) {
                    _this.mouseUpSubscription.unsubscribe();
                }
            });
    };
    /**
     * @param {?} e
     * @return {?}
     */
    WidgetComponent.prototype.onWidgetTouchStart = /**
     * @param {?} e
     * @return {?}
     */
    function (e) {
        var _this = this;
        if (this.notGrabbable(e)) {
            return;
        }
        e.preventDefault();
        this.startMove(e);
        // Make sure these observers are removed in endMove.
        this.touchMoveSubscription =
            Observable.fromEvent(this.document, 'touchmove')
                .subscribe(function (event) {
                _this.zone.runOutsideAngular(function () {
                    _this.move(event);
                });
            });
        this.touchEndSubscription =
            Observable.fromEvent(this.document, 'touchend')
                .subscribe(function () {
                _this.endMove();
                if (_this.touchMoveSubscription) {
                    _this.touchMoveSubscription.unsubscribe();
                }
                if (_this.touchEndSubscription) {
                    _this.touchEndSubscription.unsubscribe();
                }
            });
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.onWidgetMouseEnter = /**
     * @return {?}
     */
    function () {
        this.widgetHovered.emit(this);
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.onWidgetTouchEnter = /**
     * @return {?}
     */
    function () {
        this.widgetHovered.emit(this);
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.onWidgetMouseLeave = /**
     * @return {?}
     */
    function () {
        this.widgetUnhovered.emit();
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.onWidgetTouchLeave = /**
     * @return {?}
     */
    function () {
        this.widgetUnhovered.emit();
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.onResizerMouseDown = /**
     * @return {?}
     */
    function () {
        if (this.notModifiable()) {
            return true;
        }
        this.resizeStarted.emit(this);
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.onResizerTouchStart = /**
     * @return {?}
     */
    function () {
        if (this.notModifiable()) {
            return true;
        }
        this.resizeStarted.emit(this);
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.onCloseClick = /**
     * @return {?}
     */
    function () {
        this.close.emit(this.widget);
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.onToggleFullScreenClick = /**
     * @return {?}
     */
    function () {
        this.widget.toggleFullScreen();
        var /** @type {?} */ thisElement = this.elementRef.nativeElement;
        if (this.widget.isFullScreen) {
            thisElement.classList.add('fullscreen');
            // I would prefer to use document.body.scrollTop, but it is broken on
            // chome/webkit and always returns 0.
            // https://bugs.chromium.org/p/chromium/issues/detail?id=157855
            thisElement.style.top = (15 + window.scrollY) + 'px';
            thisElement.style.bottom = (15 - window.scrollY) + 'px';
            thisElement.style.left = (0 + window.scrollX) + 'px';
            thisElement.style.right = (0 - window.scrollX) + 'px';
        }
        else {
            thisElement.classList.remove('fullscreen');
            thisElement.style.top = null;
            thisElement.style.bottom = null;
            thisElement.style.left = null;
            thisElement.style.right = null;
        }
        this.fullscreen.emit();
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.ngAfterContentInit = /**
     * @return {?}
     */
    function () {
        this.elementRef.nativeElement.classList.add('widget');
        var /** @type {?} */ classes = this.bootstrapService.getClasses(this.widget);
        (_a = this.elementRef.nativeElement.classList).add.apply(_a, tslib_1.__spread(classes));
        if (this.widget.isHidden) {
            this.elementRef.nativeElement.style.visibility = 'hidden';
        }
        var _a;
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.ngAfterViewInit = /**
     * @return {?}
     */
    function () {
        var _this = this;
        // If the widget is also Angular 2+, it's bootstrapping will cause Zone errors
        // in the console because Zone is loaded as a singleton. Fun. Run outside Angular.
        this.zone.runOutsideAngular(function () {
            var /** @type {?} */ container = _this.elementRef.nativeElement.querySelector('.container');
            _this.widget.render(container)
                .then(function () {
                // Remove the spinner.
                container.children[0].remove();
            })
                .catch(function (error) { return console.log(error); });
        });
    };
    /**
     * @return {?}
     */
    WidgetComponent.prototype.ngOnDestroy = /**
     * @return {?}
     */
    function () {
        if (this.mouseMoveSubscription) {
            this.mouseMoveSubscription.unsubscribe();
        }
        if (this.mouseUpSubscription) {
            this.mouseUpSubscription.unsubscribe();
        }
        if (this.touchMoveSubscription) {
            this.touchMoveSubscription.unsubscribe();
        }
        if (this.touchEndSubscription) {
            this.touchEndSubscription.unsubscribe();
        }
    };
    WidgetComponent.decorators = [
        { type: Component, args: [{
                    selector: 'app-widget',
                    template: "<div class='card card-row' (mouseenter)='onWidgetMouseEnter()' (touchenter)='onWidgetTouchEnter()' (mouseleave)='onWidgetMouseLeave()' (touchleave)='onWidgetTouchLeave()'>\n  <app-widget-controls [widget]='widget' (mousedown)='onWidgetMouseDown($event)' (touchstart)='onWidgetTouchStart($event)' (close)='onCloseClick()' (fullscreen)='onToggleFullScreenClick()'></app-widget-controls>\n  <div [ngClass]='widget.isExpanded || widget.isFullScreen ? \"maximized\" : \"minimized\"'>\n    <div class='container'>\n      <div [style.height]='widget.initialHeight'>\n        <div class='loader'>Loading...</div>\n      </div>\n    </div>\n    <div class='resizer d-none d-sm-inline' (mousedown)='onResizerMouseDown()' (touchstart)='onResizerTouchStart()'></div>\n  </div>\n</div>",
                    styles: [":host{display:block}:host>div{height:100%;margin:0}.resizer{position:absolute;width:5px;height:98%;top:2px;right:2px;cursor:ew-resize}.maximized{opacity:1;transition-property:height,opacity;transition-duration:.2s,.5s}.minimized{opacity:0;transition-property:height,opacity;transition-duration:.5s,0;height:0!important}:host.fullscreen .resizer{cursor:default}:host.fullscreen{z-index:100;max-width:100%;position:absolute}.loader{color:gray;margin:auto;font-size:45px;top:calc(50% - 45px);text-indent:-9999em;overflow:hidden;width:1em;height:1em;border-radius:50%;position:relative;-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-animation:1.7s infinite load6,1.7s infinite round;animation:1.7s infinite load6,1.7s infinite round}@-webkit-keyframes load6{0%,100%,5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}}@keyframes load6{0%,100%,5%,95%{box-shadow:0 -.83em 0 -.4em,0 -.83em 0 -.42em,0 -.83em 0 -.44em,0 -.83em 0 -.46em,0 -.83em 0 -.477em}10%,59%{box-shadow:0 -.83em 0 -.4em,-.087em -.825em 0 -.42em,-.173em -.812em 0 -.44em,-.256em -.789em 0 -.46em,-.297em -.775em 0 -.477em}20%{box-shadow:0 -.83em 0 -.4em,-.338em -.758em 0 -.42em,-.555em -.617em 0 -.44em,-.671em -.488em 0 -.46em,-.749em -.34em 0 -.477em}38%{box-shadow:0 -.83em 0 -.4em,-.377em -.74em 0 -.42em,-.645em -.522em 0 -.44em,-.775em -.297em 0 -.46em,-.82em -.09em 0 -.477em}}@-webkit-keyframes round{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes round{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}"]
                },] },
    ];
    /** @nocollapse */
    WidgetComponent.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Inject, args: [DOCUMENT,] },] },
        { type: ElementRef, },
        { type: NgZone, },
        { type: BootstrapService, },
    ]; };
    WidgetComponent.propDecorators = {
        "widget": [{ type: Input },],
        "widgetMoving": [{ type: Output },],
        "widgetDropped": [{ type: Output },],
        "widgetHovered": [{ type: Output },],
        "widgetUnhovered": [{ type: Output },],
        "resizeStarted": [{ type: Output },],
        "close": [{ type: Output },],
        "fullscreen": [{ type: Output },],
    };
    return WidgetComponent;
}());
export { WidgetComponent };
function WidgetComponent_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    WidgetComponent.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    WidgetComponent.ctorParameters;
    /** @type {!Object<string,!Array<{type: !Function, args: (undefined|!Array<?>)}>>} */
    WidgetComponent.propDecorators;
    /** @type {?} */
    WidgetComponent.prototype.widget;
    /** @type {?} */
    WidgetComponent.prototype.widgetMoving;
    /** @type {?} */
    WidgetComponent.prototype.widgetDropped;
    /** @type {?} */
    WidgetComponent.prototype.widgetHovered;
    /** @type {?} */
    WidgetComponent.prototype.widgetUnhovered;
    /** @type {?} */
    WidgetComponent.prototype.resizeStarted;
    /** @type {?} */
    WidgetComponent.prototype.close;
    /** @type {?} */
    WidgetComponent.prototype.fullscreen;
    /** @type {?} */
    WidgetComponent.prototype.mouseMoveSubscription;
    /** @type {?} */
    WidgetComponent.prototype.mouseUpSubscription;
    /** @type {?} */
    WidgetComponent.prototype.touchMoveSubscription;
    /** @type {?} */
    WidgetComponent.prototype.touchEndSubscription;
    /** @type {?} */
    WidgetComponent.prototype.moveStartPosition;
    /** @type {?} */
    WidgetComponent.prototype.initialPosition;
    /** @type {?} */
    WidgetComponent.prototype.document;
    /** @type {?} */
    WidgetComponent.prototype.elementRef;
    /** @type {?} */
    WidgetComponent.prototype.zone;
    /** @type {?} */
    WidgetComponent.prototype.bootstrapService;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2lkZ2V0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuYXZpaGVhbHRoL3dpZGdldC1kYXNoYm9hcmQtbmc1LyIsInNvdXJjZXMiOlsic3JjL2Rhc2hib2FyZC93aWRnZXRzL3dpZGdldC93aWRnZXQuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUNMLFNBQVMsRUFFVCxLQUFLLEVBQ0wsTUFBTSxFQUNOLFVBQVUsRUFDVixZQUFZLEVBQ1osTUFBTSxFQUNOLE1BQU0sRUFJUCxNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDM0MsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3pDLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUM3QyxPQUFPLCtCQUErQixDQUFDO0FBRXZDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLHNCQUFzQixDQUFDOzs7Ozs7Ozs7Ozs7SUF5Q3RELHlCQUM0QixVQUNsQixZQUNBLE1BQ0E7UUFIa0IsYUFBUSxHQUFSLFFBQVE7UUFDMUIsZUFBVSxHQUFWLFVBQVU7UUFDVixTQUFJLEdBQUosSUFBSTtRQUNKLHFCQUFnQixHQUFoQixnQkFBZ0I7NEJBckJELElBQUksWUFBWSxFQUFtQjs2QkFDbEMsSUFBSSxZQUFZLEVBQVE7NkJBQ3hCLElBQUksWUFBWSxFQUFtQjsrQkFDakMsSUFBSSxZQUFZLEVBQVE7NkJBQzFCLElBQUksWUFBWSxFQUFtQjtxQkFDM0MsSUFBSSxZQUFZLEVBQVU7MEJBQ3JCLElBQUksWUFBWSxFQUFRO0tBZUU7Ozs7SUFFakQsa0NBQVE7OztJQUFSLGVBQWM7Ozs7O0lBRU4seUNBQWU7Ozs7Y0FBQyxDQUFDO1FBQ3ZCLE1BQU0sQ0FBQyxDQUFDLENBQUMsY0FBYyxDQUFDLENBQUM7WUFDdkI7Z0JBQ0UsQ0FBQyxFQUFFLENBQUMsQ0FB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K0JBQ04sTUFBTTs7MEJBaERUOztTQXdDYSxlQUFlIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBDb21wb25lbnQsXHJcbiAgT25Jbml0LFxyXG4gIElucHV0LFxyXG4gIE91dHB1dCxcclxuICBFbGVtZW50UmVmLFxyXG4gIEV2ZW50RW1pdHRlcixcclxuICBJbmplY3QsXHJcbiAgTmdab25lLFxyXG4gIE9uRGVzdHJveSxcclxuICBBZnRlckNvbnRlbnRJbml0LFxyXG4gIEFmdGVyVmlld0luaXRcclxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgRE9DVU1FTlQgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xyXG5pbXBvcnQgeyBXaWRnZXQgfSBmcm9tICcuLi93aWRnZXQubW9kZWwnO1xyXG5pbXBvcnQgeyBPYnNlcnZhYmxlIH0gZnJvbSAncnhqcy9PYnNlcnZhYmxlJztcclxuaW1wb3J0ICdyeGpzL2FkZC9vYnNlcnZhYmxlL2Zyb21FdmVudCc7XHJcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMvU3Vic2NyaXB0aW9uJztcclxuaW1wb3J0IHsgQm9vdHN0cmFwU2VydmljZSB9IGZyb20gJy4uL2Jvb3RzdHJhcC5zZXJ2aWNlJztcclxuXHJcbmludGVyZmFjZSBJQ29vcmRpbmF0ZXMge1xyXG4gIHg6IG51bWJlcjtcclxuICB5OiBudW1iZXI7XHJcbn1cclxuXHJcbkBDb21wb25lbnQoe1xyXG4gIHNlbGVjdG9yOiAnYXBwLXdpZGdldCcsXHJcbiAgdGVtcGxhdGU6IGA8ZGl2IGNsYXNzPSdjYXJkIGNhcmQtcm93JyAobW91c2VlbnRlcik9J29uV2lkZ2V0TW91c2VFbnRlcigpJyAodG91Y2hlbnRlcik9J29uV2lkZ2V0VG91Y2hFbnRlcigpJyAobW91c2VsZWF2ZSk9J29uV2lkZ2V0TW91c2VMZWF2ZSgpJyAodG91Y2hsZWF2ZSk9J29uV2lkZ2V0VG91Y2hMZWF2ZSgpJz5cclxuICA8YXBwLXdpZGdldC1jb250cm9scyBbd2lkZ2V0XT0nd2lkZ2V0JyAobW91c2Vkb3duKT0nb25XaWRnZXRNb3VzZURvd24oJGV2ZW50KScgKHRvdWNoc3RhcnQpPSdvbldpZGdldFRvdWNoU3RhcnQoJGV2ZW50KScgKGNsb3NlKT0nb25DbG9zZUNsaWNrKCknIChmdWxsc2NyZWVuKT0nb25Ub2dnbGVGdWxsU2NyZWVuQ2xpY2soKSc+PC9hcHAtd2lkZ2V0LWNvbnRyb2xzPlxyXG4gIDxkaXYgW25nQ2xhc3NdPSd3aWRnZXQuaXNFeHBhbmRlZCB8fCB3aWRnZXQuaXNGdWxsU2NyZWVuID8gXCJtYXhpbWl6ZWRcIiA6IFwibWluaW1pemVkXCInPlxyXG4gICAgPGRpdiBjbGFzcz0nY29udGFpbmVyJz5cclxuICAgICAgPGRpdiBbc3R5bGUuaGVpZ2h0XT0nd2lkZ2V0LmluaXRpYWxIZWlnaHQnPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9J2xvYWRlcic+TG9hZGluZy4uLjwvZGl2PlxyXG4gICAgICA8L2Rpdj5cclxuICAgIDwvZGl2PlxyXG4gICAgPGRpdiBjbGFzcz0ncmVzaXplciBkLW5vbmUgZC1zbS1pbmxpbmUnIChtb3VzZWRvd24pPSdvblJlc2l6ZXJNb3VzZURvd24oKScgKHRvdWNoc3RhcnQpPSdvblJlc2l6ZXJUb3VjaFN0YXJ0KCknPjwvZGl2PlxyXG4gIDwvZGl2PlxyXG48L2Rpdj5gLFxyXG4gIHN0eWxlczogW2A6aG9zdHtkaXNwbGF5OmJsb2NrfTpob3N0PmRpdntoZWlnaHQ6MTAwJTttYXJnaW46MH0ucmVzaXplcntwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDo1cHg7aGVpZ2h0Ojk4JTt0b3A6MnB4O3JpZ2h0OjJweDtjdXJzb3I6ZXctcmVzaXplfS5tYXhpbWl6ZWR7b3BhY2l0eToxO3RyYW5zaXRpb24tcHJvcGVydHk6aGVpZ2h0LG9wYWNpdHk7dHJhbnNpdGlvbi1kdXJhdGlvbjouMnMsLjVzfS5taW5pbWl6ZWR7b3BhY2l0eTowO3RyYW5zaXRpb24tcHJvcGVydHk6aGVpZ2h0LG9wYWNpdHk7dHJhbnNpdGlvbi1kdXJhdGlvbjouNXMsMDtoZWlnaHQ6MCFpbXBvcnRhbnR9Omhvc3QuZnVsbHNjcmVlbiAucmVzaXplcntjdXJzb3I6ZGVmYXVsdH06aG9zdC5mdWxsc2NyZWVue3otaW5kZXg6MTAwO21heC13aWR0aDoxMDAlO3Bvc2l0aW9uOmFic29sdXRlfS5sb2FkZXJ7Y29sb3I6Z3JheTttYXJnaW46YXV0bztmb250LXNpemU6NDVweDt0b3A6Y2FsYyg1MCUgLSA0NXB4KTt0ZXh0LWluZGVudDotOTk5OWVtO292ZXJmbG93OmhpZGRlbjt3aWR0aDoxZW07aGVpZ2h0OjFlbTtib3JkZXItcmFkaXVzOjUwJTtwb3NpdGlvbjpyZWxhdGl2ZTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVaKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVaKDApOy13ZWJraXQtYW5pbWF0aW9uOjEuN3MgaW5maW5pdGUgbG9hZDYsMS43cyBpbmZpbml0ZSByb3VuZDthbmltYXRpb246MS43cyBpbmZpbml0ZSBsb2FkNiwxLjdzIGluZmluaXRlIHJvdW5kfUAtd2Via2l0LWtleWZyYW1lcyBsb2FkNnswJSwxMDAlLDUlLDk1JXtib3gtc2hhZG93OjAgLS44M2VtIDAgLS40ZW0sMCAtLjgzZW0gMCAtLjQyZW0sMCAtLjgzZW0gMCAtLjQ0ZW0sMCAtLjgzZW0gMCAtLjQ2ZW0sMCAtLjgzZW0gMCAtLjQ3N2VtfTEwJSw1OSV7Ym94LXNoYWRvdzowIC0uODNlbSAwIC0uNGVtLC0uMDg3ZW0gLS44MjVlbSAwIC0uNDJlbSwtLjE3M2VtIC0uODEyZW0gMCAtLjQ0ZW0sLS4yNTZlbSAtLjc4OWVtIDAgLS40NmVtLC0uMjk3ZW0gLS43NzVlbSAwIC0uNDc3ZW19MjAle2JveC1zaGFkb3c6MCAtLjgzZW0gMCAtLjRlbSwtLjMzOGVtIC0uNzU4ZW0gMCAtLjQyZW0sLS41NTVlbSAtLjYxN2VtIDAgLS40NGVtLC0uNjcxZW0gLS40ODhlbSAwIC0uNDZlbSwtLjc0OWVtIC0uMzRlbSAwIC0uNDc3ZW19Mzgle2JveC1zaGFkb3c6MCAtLjgzZW0gMCAtLjRlbSwtLjM3N2VtIC0uNzRlbSAwIC0uNDJlbSwtLjY0NWVtIC0uNTIyZW0gMCAtLjQ0ZW0sLS43NzVlbSAtLjI5N2VtIDAgLS40NmVtLC0uODJlbSAtLjA5ZW0gMCAtLjQ3N2VtfX1Aa2V5ZnJhbWVzIGxvYWQ2ezAlLDEwMCUsNSUsOTUle2JveC1zaGFkb3c6MCAtLjgzZW0gMCAtLjRlbSwwIC0uODNlbSAwIC0uNDJlbSwwIC0uODNlbSAwIC0uNDRlbSwwIC0uODNlbSAwIC0uNDZlbSwwIC0uODNlbSAwIC0uNDc3ZW19MTAlLDU5JXtib3gtc2hhZG93OjAgLS44M2VtIDAgLS40ZW0sLS4wODdlbSAtLjgyNWVtIDAgLS40MmVtLC0uMTczZW0gLS44MTJlbSAwIC0uNDRlbSwtLjI1NmVtIC0uNzg5ZW0gMCAtLjQ2ZW0sLS4yOTdlbSAtLjc3NWVtIDAgLS40NzdlbX0yMCV7Ym94LXNoYWRvdzowIC0uODNlbSAwIC0uNGVtLC0uMzM4ZW0gLS43NThlbSAwIC0uNDJlbSwtLjU1NWVtIC0uNjE3ZW0gMCAtLjQ0ZW0sLS42NzFlbSAtLjQ4OGVtIDAgLS40NmVtLC0uNzQ5ZW0gLS4zNGVtIDAgLS40NzdlbX0zOCV7Ym94LXNoYWRvdzowIC0uODNlbSAwIC0uNGVtLC0uMzc3ZW0gLS43NGVtIDAgLS40MmVtLC0uNjQ1ZW0gLS41MjJlbSAwIC0uNDRlbSwtLjc3NWVtIC0uMjk3ZW0gMCAtLjQ2ZW0sLS44MmVtIC0uMDllbSAwIC0uNDc3ZW19fUAtd2Via2l0LWtleWZyYW1lcyByb3VuZHswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMCk7dHJhbnNmb3JtOnJvdGF0ZSgwKX0xMDAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKX19QGtleWZyYW1lcyByb3VuZHswJXstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoMCk7dHJhbnNmb3JtOnJvdGF0ZSgwKX0xMDAley13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpO3RyYW5zZm9ybTpyb3RhdGUoMzYwZGVnKX19YF1cclxufSlcclxuZXhwb3J0IGNsYXNzIFdpZGdldENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJDb250ZW50SW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcclxuICBASW5wdXQoKSB3aWRnZXQ6IFdpZGdldDtcclxuICBAT3V0cHV0KCkgd2lkZ2V0TW92aW5nID0gbmV3IEV2ZW50RW1pdHRlcjxXaWRnZXRDb21wb25lbnQ+KCk7XHJcbiAgQE91dHB1dCgpIHdpZGdldERyb3BwZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcbiAgQE91dHB1dCgpIHdpZGdldEhvdmVyZWQgPSBuZXcgRXZlbnRFbWl0dGVyPFdpZGdldENvbXBvbmVudD4oKTtcclxuICBAT3V0cHV0KCkgd2lkZ2V0VW5ob3ZlcmVkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xyXG4gIEBPdXRwdXQoKSByZXNpemVTdGFydGVkID0gbmV3IEV2ZW50RW1pdHRlcjxXaWRnZXRDb21wb25lbnQ+KCk7XHJcbiAgQE91dHB1dCgpIGNsb3NlID0gbmV3IEV2ZW50RW1pdHRlcjxXaWRnZXQ+KCk7XHJcbiAgQE91dHB1dCgpIGZ1bGxzY3JlZW4gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XHJcblxyXG4gIC8vIEFsbCBzdWJzY3JpcHRpb25zIG11c3QgYmUgY2xlYW5lZCB1cCB0byBwcmV2ZW50IGxlYWtzLlxyXG4gIHByaXZhdGUgbW91c2VNb3ZlU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgcHJpdmF0ZSBtb3VzZVVwU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgcHJpdmF0ZSB0b3VjaE1vdmVTdWJzY3JpcHRpb246IFN1YnNjcmlwdGlvbjtcclxuICBwcml2YXRlIHRvdWNoRW5kU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcblxyXG4gIHByaXZhdGUgbW92ZVN0YXJ0UG9zaXRpb246IElDb29yZGluYXRlcztcclxuICBwcml2YXRlIGluaXRpYWxQb3NpdGlvbjogSUNvb3JkaW5hdGVzO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIEBJbmplY3QoRE9DVU1FTlQpIHByaXZhdGUgZG9jdW1lbnQsXHJcbiAgICBwcml2YXRlIGVsZW1lbnRSZWY6IEVsZW1lbnRSZWYsXHJcbiAgICBwcml2YXRlIHpvbmU6IE5nWm9uZSxcclxuICAgIHByaXZhdGUgYm9vdHN0cmFwU2VydmljZTogQm9vdHN0cmFwU2VydmljZSkgeyB9XHJcblxyXG4gIG5nT25Jbml0KCkgeyB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VXNlclBvc2l0aW9uKGUpOiBJQ29vcmRpbmF0ZXMge1xyXG4gICAgcmV0dXJuIGUuY2hhbmdlZFRvdWNoZXMgP1xyXG4gICAgICB7XHJcbiAgICAgICAgeDogZS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCxcclxuICAgICAgICB5OiBlLmNoYW5nZWRUb3VjaGVzWzBdLnBhZ2VZXHJcbiAgICAgIH0gOiB7XHJcbiAgICAgICAgeDogZS5wYWdlWCxcclxuICAgICAgICB5OiBlLnBhZ2VZXHJcbiAgICAgIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIG5vdE1vZGlmaWFibGUoKSB7XHJcbiAgICBpZiAodGhpcy53aWRnZXQuaXNGdWxsU2NyZWVuKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBub3RHcmFiYmFibGUoZSkge1xyXG4gICAgaWYgKHRoaXMubm90TW9kaWZpYWJsZSgpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKCFlKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xyXG4gICAgaWYgKCF0YXJnZXQpIHtcclxuICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnbm90LWdyYWJiYWJsZScpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgaWYgKHRhcmdldC5jbG9zZXN0KCcubm90LWdyYWJiYWJsZScpKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBzdGFydE1vdmUoZSkge1xyXG4gICAgdGhpcy53aWRnZXRNb3ZpbmcuZW1pdCh0aGlzKTtcclxuXHJcbiAgICBjb25zdCB0aGlzRWxlbWVudCA9IHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50O1xyXG5cclxuICAgIC8vIFdlJ2xsIHJlc2V0IHRoZSBzdHlsZSB3aGVuIHdlIGNhbGwgZW5kTW92ZS5cclxuICAgIHRoaXMuaW5pdGlhbFBvc2l0aW9uID0ge1xyXG4gICAgICB5OiB0aGlzRWxlbWVudC5zdHlsZS50b3AsXHJcbiAgICAgIHg6IHRoaXNFbGVtZW50LnN0eWxlLmxlZnRcclxuICAgIH07XHJcblxyXG4gICAgLy8gTWFrZSB0aGUgZHJhZ2dpbmcgd2lkZ2V0IGZvbGxvdyB0aGUgdXNlcidzIG1vdmVtZW50LlxyXG4gICAgY29uc3QgdXNlclBvc2l0aW9uID0gdGhpcy5nZXRVc2VyUG9zaXRpb24oZSk7XHJcbiAgICB0aGlzLm1vdmVTdGFydFBvc2l0aW9uID0ge1xyXG4gICAgICB4OiBlLnRvdWNoZXMgP1xyXG4gICAgICAgIGUudG91Y2hlc1swXS5wYWdlWCAtIHRoaXNFbGVtZW50Lm9mZnNldExlZnQgOlxyXG4gICAgICAgIGUucGFnZVggLSB0aGlzRWxlbWVudC5vZmZzZXRMZWZ0LFxyXG4gICAgICB5OiBlLnRvdWNoZXMgP1xyXG4gICAgICAgIGUudG91Y2hlc1swXS5wYWdlWSAtIHRoaXNFbGVtZW50Lm9mZnNldFRvcCA6XHJcbiAgICAgICAgZS5wYWdlWSAtIHRoaXNFbGVtZW50Lm9mZnNldFRvcFxyXG4gICAgfTtcclxuICAgIHRoaXNFbGVtZW50LnN0eWxlLmxlZnQgPSAodXNlclBvc2l0aW9uLnggLSB0aGlzLm1vdmVTdGFydFBvc2l0aW9uLngpICsgJ3B4JztcclxuICAgIHRoaXNFbGVtZW50LnN0eWxlLnRvcCA9ICh1c2VyUG9zaXRpb24ueSAtIHRoaXMubW92ZVN0YXJ0UG9zaXRpb24ueSkgKyAncHgnO1xyXG5cclxuICAgIHRoaXNFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ21vdmluZy13aWRnZXQnKTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgbW92ZShlKSB7XHJcbiAgICAvLyBNYWtlIHRoZSB3aWRnZXQgZm9sbG93IHRoZSB1c2VyJ3MgbW92ZW1lbnQuXHJcbiAgICBjb25zdCB1c2VyUG9zaXRpb24gPSB0aGlzLmdldFVzZXJQb3NpdGlvbihlKTtcclxuICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnN0eWxlLmxlZnQgPSAodXNlclBvc2l0aW9uLnggLSB0aGlzLm1vdmVTdGFydFBvc2l0aW9uLngpICsgJ3B4JztcclxuICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9ICh1c2VyUG9zaXRpb24ueSAtIHRoaXMubW92ZVN0YXJ0UG9zaXRpb24ueSkgKyAncHgnO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBlbmRNb3ZlKCkge1xyXG4gICAgdGhpcy53aWRnZXREcm9wcGVkLmVtaXQoKTtcclxuICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ21vdmluZy13aWRnZXQnKTtcclxuICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IHRoaXMuaW5pdGlhbFBvc2l0aW9uLnk7XHJcbiAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5zdHlsZS5sZWZ0ID0gdGhpcy5pbml0aWFsUG9zaXRpb24ueDtcclxuICB9XHJcblxyXG4gIGdldEhlaWdodEluZm9ybWF0aW9uKCk6IGFueSB7XHJcbiAgICBjb25zdCByZWN0ID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnRcclxuICAgICAgLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgaGVpZ2h0OiByZWN0LmhlaWdodCxcclxuICAgICAgdG9wOiByZWN0LnRvcFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIG9uV2lkZ2V0TW91c2VEb3duKGUpIHtcclxuICAgIGlmICh0aGlzLm5vdEdyYWJiYWJsZShlKSkge1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICB0aGlzLnN0YXJ0TW92ZShlKTtcclxuICAgIC8vIE1ha2Ugc3VyZSB0aGVzZSBvYnNlcnZlcnMgYXJlIHJlbW92ZWQgaW4gZW5kTW92ZS5cclxuICAgIHRoaXMubW91c2VNb3ZlU3Vic2NyaXB0aW9uID1cclxuICAgICAgT2JzZXJ2YWJsZS5mcm9tRXZlbnQodGhpcy5kb2N1bWVudCwgJ21vdXNlbW92ZScpXHJcbiAgICAgICAgLnN1YnNjcmliZShldmVudCA9PiB7XHJcbiAgICAgICAgICB0aGlzLnpvbmUucnVuT3V0c2lkZUFuZ3VsYXIoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1vdmUoZXZlbnQpO1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB0aGlzLm1vdXNlVXBTdWJzY3JpcHRpb24gPVxyXG4gICAgICBPYnNlcnZhYmxlLmZyb21FdmVudCh0aGlzLmRvY3VtZW50LCAnbW91c2V1cCcpXHJcbiAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmVuZE1vdmUoKTtcclxuICAgICAgICAgIGlmICh0aGlzLm1vdXNlTW92ZVN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlTW92ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHRoaXMubW91c2VVcFN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLm1vdXNlVXBTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICB9XHJcblxyXG4gIG9uV2lkZ2V0VG91Y2hTdGFydChlKSB7XHJcbiAgICBpZiAodGhpcy5ub3RHcmFiYmFibGUoZSkpIHtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgdGhpcy5zdGFydE1vdmUoZSk7XHJcbiAgICAvLyBNYWtlIHN1cmUgdGhlc2Ugb2JzZXJ2ZXJzIGFyZSByZW1vdmVkIGluIGVuZE1vdmUuXHJcbiAgICB0aGlzLnRvdWNoTW92ZVN1YnNjcmlwdGlvbiA9XHJcbiAgICAgIE9ic2VydmFibGUuZnJvbUV2ZW50KHRoaXMuZG9jdW1lbnQsICd0b3VjaG1vdmUnKVxyXG4gICAgICAgIC5zdWJzY3JpYmUoZXZlbnQgPT4ge1xyXG4gICAgICAgICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tb3ZlKGV2ZW50KTtcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgdGhpcy50b3VjaEVuZFN1YnNjcmlwdGlvbiA9XHJcbiAgICAgIE9ic2VydmFibGUuZnJvbUV2ZW50KHRoaXMuZG9jdW1lbnQsICd0b3VjaGVuZCcpXHJcbiAgICAgICAgLnN1YnNjcmliZSgoKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLmVuZE1vdmUoKTtcclxuICAgICAgICAgIGlmICh0aGlzLnRvdWNoTW92ZVN1YnNjcmlwdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLnRvdWNoTW92ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgaWYgKHRoaXMudG91Y2hFbmRTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy50b3VjaEVuZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgb25XaWRnZXRNb3VzZUVudGVyKCkge1xyXG4gICAgdGhpcy53aWRnZXRIb3ZlcmVkLmVtaXQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvbldpZGdldFRvdWNoRW50ZXIoKSB7XHJcbiAgICB0aGlzLndpZGdldEhvdmVyZWQuZW1pdCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9uV2lkZ2V0TW91c2VMZWF2ZSgpIHtcclxuICAgIHRoaXMud2lkZ2V0VW5ob3ZlcmVkLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIG9uV2lkZ2V0VG91Y2hMZWF2ZSgpIHtcclxuICAgIHRoaXMud2lkZ2V0VW5ob3ZlcmVkLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIG9uUmVzaXplck1vdXNlRG93bigpIHtcclxuICAgIGlmICh0aGlzLm5vdE1vZGlmaWFibGUoKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHRoaXMucmVzaXplU3RhcnRlZC5lbWl0KHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb25SZXNpemVyVG91Y2hTdGFydCgpIHtcclxuICAgIGlmICh0aGlzLm5vdE1vZGlmaWFibGUoKSkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIHRoaXMucmVzaXplU3RhcnRlZC5lbWl0KHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb25DbG9zZUNsaWNrKCkge1xyXG4gICAgdGhpcy5jbG9zZS5lbWl0KHRoaXMud2lkZ2V0KTtcclxuICB9XHJcblxyXG4gIG9uVG9nZ2xlRnVsbFNjcmVlbkNsaWNrKCkge1xyXG4gICAgdGhpcy53aWRnZXQudG9nZ2xlRnVsbFNjcmVlbigpO1xyXG4gICAgY29uc3QgdGhpc0VsZW1lbnQgPSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudDtcclxuICAgIGlmICh0aGlzLndpZGdldC5pc0Z1bGxTY3JlZW4pIHtcclxuICAgICAgdGhpc0VsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZnVsbHNjcmVlbicpO1xyXG4gICAgICAvLyBJIHdvdWxkIHByZWZlciB0byB1c2UgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AsIGJ1dCBpdCBpcyBicm9rZW4gb25cclxuICAgICAgLy8gY2hvbWUvd2Via2l0IGFuZCBhbHdheXMgcmV0dXJucyAwLlxyXG4gICAgICAvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0xNTc4NTVcclxuICAgICAgdGhpc0VsZW1lbnQuc3R5bGUudG9wID0gKDE1ICsgd2luZG93LnNjcm9sbFkpICsgJ3B4JztcclxuICAgICAgdGhpc0VsZW1lbnQuc3R5bGUuYm90dG9tID0gKDE1IC0gd2luZG93LnNjcm9sbFkpICsgJ3B4JztcclxuICAgICAgdGhpc0VsZW1lbnQuc3R5bGUubGVmdCA9ICgwICsgd2luZG93LnNjcm9sbFgpICsgJ3B4JztcclxuICAgICAgdGhpc0VsZW1lbnQuc3R5bGUucmlnaHQgPSAoMCAtIHdpbmRvdy5zY3JvbGxYKSArICdweCc7XHJcblxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpc0VsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnZnVsbHNjcmVlbicpO1xyXG4gICAgICB0aGlzRWxlbWVudC5zdHlsZS50b3AgPSBudWxsO1xyXG4gICAgICB0aGlzRWxlbWVudC5zdHlsZS5ib3R0b20gPSBudWxsO1xyXG4gICAgICB0aGlzRWxlbWVudC5zdHlsZS5sZWZ0ID0gbnVsbDtcclxuICAgICAgdGhpc0VsZW1lbnQuc3R5bGUucmlnaHQgPSBudWxsO1xyXG4gICAgfVxyXG4gICAgdGhpcy5mdWxsc2NyZWVuLmVtaXQoKTtcclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJDb250ZW50SW5pdCgpIHtcclxuICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3dpZGdldCcpO1xyXG4gICAgY29uc3QgY2xhc3Nlczogc3RyaW5nW10gPSB0aGlzLmJvb3RzdHJhcFNlcnZpY2UuZ2V0Q2xhc3Nlcyh0aGlzLndpZGdldCk7XHJcbiAgICB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudC5jbGFzc0xpc3QuYWRkKC4uLmNsYXNzZXMpO1xyXG4gICAgaWYgKHRoaXMud2lkZ2V0LmlzSGlkZGVuKSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG5nQWZ0ZXJWaWV3SW5pdCgpIHtcclxuICAgIC8vIElmIHRoZSB3aWRnZXQgaXMgYWxzbyBBbmd1bGFyIDIrLCBpdCdzIGJvb3RzdHJhcHBpbmcgd2lsbCBjYXVzZSBab25lIGVycm9yc1xyXG4gICAgLy8gaW4gdGhlIGNvbnNvbGUgYmVjYXVzZSBab25lIGlzIGxvYWRlZCBhcyBhIHNpbmdsZXRvbi4gRnVuLiBSdW4gb3V0c2lkZSBBbmd1bGFyLlxyXG4gICAgdGhpcy56b25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcclxuICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRhaW5lcicpO1xyXG4gICAgICB0aGlzLndpZGdldC5yZW5kZXIoY29udGFpbmVyKVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIC8vIFJlbW92ZSB0aGUgc3Bpbm5lci5cclxuICAgICAgICAgIGNvbnRhaW5lci5jaGlsZHJlblswXS5yZW1vdmUoKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC5jYXRjaChlcnJvciA9PiBjb25zb2xlLmxvZyhlcnJvcikpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBuZ09uRGVzdHJveSgpIHtcclxuICAgIGlmICh0aGlzLm1vdXNlTW92ZVN1YnNjcmlwdGlvbikge1xyXG4gICAgICB0aGlzLm1vdXNlTW92ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMubW91c2VVcFN1YnNjcmlwdGlvbikge1xyXG4gICAgICB0aGlzLm1vdXNlVXBTdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnRvdWNoTW92ZVN1YnNjcmlwdGlvbikge1xyXG4gICAgICB0aGlzLnRvdWNoTW92ZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMudG91Y2hFbmRTdWJzY3JpcHRpb24pIHtcclxuICAgICAgdGhpcy50b3VjaEVuZFN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iXX0=