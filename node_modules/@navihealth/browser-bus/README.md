# nh-browser-bus

nh-browser-bus is a service bus implementation used for decoupled communication between components in the browser.

# Installation

npm install --save nh-browser-bus

# Usage

## Get an instance of the bus

```
import busFactory from "nh-browser-bus";

const bus = busFactory.create();
```

## Notify that an event just occurred

```
const event = {
    eventName: "PATIENT_ADDED",
    message: {
        id: "123",
        name: "Warren Zevon"
    }
};

bus.notify(event);
```

## Listen for an event

```
const listener = {
    eventName: "PATIENT_ADDED",
    respond: (event) => {
        console.log(event);
    }
};

bus.listen(listener);
```

## Unlisten to events

```
const listener = {
    eventName: "PATIENT_ADDED",
    respond: (event) => {
        console.log(event);
    }
};

bus.ignore(listener);
```

## Log bus activity to the console. This is helpful in a dev environment, but should be turned off for production builds.

In your application's webpack config file add an instance of a DefinePlugin, like this...

```
const webpack = require('webpack');

module.exports = {
    plugins: [
        new webpack.DefinePlugin({
            'process.env': {
                DEV: JSON.stringify(true)
            }
        })
    ]
};
```

# Useful Commands

## To test the library
npm run test

## To report code coverage of tests
npm run coverage

## To build the library in dev mode
npm run build:dev

## To build the library in release mode
npm run build:release

## To push library to Artifactory
npm publish